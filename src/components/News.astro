---
import type { NewsSchema } from '../content/config.ts';
export interface Props extends NewsSchema {}

const { title, date, subtitle, address } = Astro.props;
const jsdate = new Date(date);

const formatter = new Intl.DateTimeFormat('en-UK', {
	year: 'numeric',
	month: 'short',
	day: 'numeric'
});

const when = formatter.format(jsdate);
---

<article>
	<header>
		<h2>{title}</h2>
		<small>{when}</small>
	</header>
	<div class="group">
		{subtitle && <h4>{subtitle}</h4>}
		{
			address?.length && (
				<ul>
					{address.map((entry) => (
						<li>{entry}</li>
					))}
				</ul>
			)
		}
	</div>
	<slot />
</article>

<style>
	.group {
		display: flex;
		justify-content: space-between;
		ul {
			font-size: small;
			text-align: right;
			list-style: none;
		}
	}
	h4 {
		margin-top: 0;
	}
	header {
		display: flex;
		justify-content: space-between;
		gap: 2em;
		align-items: center;
	}
	article {
		display: flex;
		flex-direction: column;
		gap: 1em;
		position: relative;
		&:after {
			position: absolute;
			top: 0;
			content: '';
			width: 100%;
			height: 0.125em;
			background-color: var(--aura-black);
		}
	}
</style>
